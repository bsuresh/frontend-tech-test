<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Technical - test</title>
</head>
<style></style>
<body>
<header>
    <h1>Top 25 ranked cryptocurrencies</h1>
    <p>Please use the currency dropdown below to switch currencies.<br>You can also click on the column headings to sort
        asc/desc.</p>
</header>
<main>
    <div class="table-wrapper">
        <table data-js-cypto-table>
            <thead>
            <tr>
                <th data-key="id">ID</th>
                <th data-key="rank">Rank</th>
                <th data-key="priceUsd">Price</th>
                <th data-key="symbol">Symbol</th>
                <th data-key="explorer">Link</th>
            </tr>
            </thead>
            <tbody>
            <!-- Data Rows corresponding to the heading attribute `data-key` will be displayed here using JS -->
            </tbody>
        </table>
    </div>
</main>
<script>
    /**
     * A wrapper for class for FetchAPI for handling errors gracefully if it happens
     */
    class API {
        /**
         * @param url {string} - The URL to fetch data from
         */
        constructor(url) {
            this.url = url;
        }

        /**
         * Fetch data from the URL
         * @public
         * @returns {Promise<*>}
         */
        async fetchData() {
            try {
                const response = await fetch(this.url);
                return await response.json();
            } catch (error) {
                console.error('Error:', error);
                return error;
            }
        }
    }

    // @todo: Write a collection of utility functions to help with sorting, currency conversions, etc.,
    // @todo: Write a class to handle the rendering of the data in rows the table body for table with `data-js-cypto-table` attribute

    // Wait for DOM ready or already loaded
    document.addEventListener('DOMContentLoaded', () => {
        // Fetch data from API and create table
        const coinCapAPI = new API('https://api.coincap.io/v2/assets');
        coinCapAPI.fetchData().then(data => {
            // @todo: Create new table instance with the data
        });
    });
</script>
</body>
</html>